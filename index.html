<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Навігатор Стажера - Галя Балувана</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .main-page { display: block; }
        .sub-page { display: none; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
    </style>
</head>
<body class="bg-gray-50">

    <div class="container mx-auto max-w-lg min-h-screen bg-white shadow-lg">
        <!-- HEADER -->
        <header class="sticky top-0 bg-white border-b border-gray-200 z-10">
            <div class="flex items-center justify-between p-4">
                <button id="backButton" class="text-gray-600 invisible">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                </button>
                <h1 id="headerTitle" class="text-xl font-bold text-gray-800">Навігатор Стажера</h1>
                <div class="w-6"></div> <!-- Spacer -->
            </div>
        </header>

        <!-- MAIN CONTENT -->
        <main class="p-4 md:p-6 pb-20">

            <!-- Main Page -->
            <div id="main-page" class="main-page">
                <div class="text-center mb-6">
                    <img src="https://galya-baluwana.lviv.ua/wp-content/uploads/2022/09/logo-yellow.svg" alt="Галя Балувана" class="mx-auto h-24 w-24 rounded-full mb-4">
                    <h2 class="text-2xl font-bold text-gray-900">Ласкаво просимо, Анно!</h2>
                    <p class="text-gray-500">Ваш шлях у "Галя Балувана" починається тут.</p>
                </div>

                <!-- Progress -->
                <div class="mb-8">
                    <div class="flex justify-between mb-1">
                        <span class="text-base font-medium text-amber-700">Ваш прогрес</span>
                        <span class="text-sm font-medium text-amber-700">25%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                        <div class="bg-amber-500 h-2.5 rounded-full" style="width: 25%"></div>
                    </div>
                </div>

                <!-- Menu Grid -->
                <div class="grid grid-cols-2 gap-4">
                    <button data-page="products-page" class="menu-card group flex flex-col items-center justify-center p-4 bg-amber-50 rounded-lg shadow-sm hover:bg-amber-100 transition-all duration-200">
                        <div class="p-3 bg-white rounded-full mb-3 shadow-md">
                            <i data-lucide="book-open" class="w-8 h-8 text-amber-500"></i>
                        </div>
                        <span class="font-semibold text-gray-700 text-center">Наша Продукція</span>
                    </button>
                    <button data-page="standards-page" class="menu-card group flex flex-col items-center justify-center p-4 bg-amber-50 rounded-lg shadow-sm hover:bg-amber-100 transition-all duration-200">
                         <div class="p-3 bg-white rounded-full mb-3 shadow-md">
                            <i data-lucide="gem" class="w-8 h-8 text-amber-500"></i>
                        </div>
                        <span class="font-semibold text-gray-700 text-center">Стандарти Роботи</span>
                    </button>
                    <button data-page="plan-page" class="menu-card group flex flex-col items-center justify-center p-4 bg-amber-50 rounded-lg shadow-sm hover:bg-amber-100 transition-all duration-200">
                         <div class="p-3 bg-white rounded-full mb-3 shadow-md">
                            <i data-lucide="clipboard-list" class="w-8 h-8 text-amber-500"></i>
                        </div>
                        <span class="font-semibold text-gray-700 text-center">План Адаптації</span>
                    </button>
                    <button data-page="quiz-page" class="menu-card group flex flex-col items-center justify-center p-4 bg-amber-50 rounded-lg shadow-sm hover:bg-amber-100 transition-all duration-200">
                         <div class="p-3 bg-white rounded-full mb-3 shadow-md">
                            <i data-lucide="graduation-cap" class="w-8 h-8 text-amber-500"></i>
                        </div>
                        <span class="font-semibold text-gray-700 text-center">Перевірка Знань</span>
                    </button>
                    <button data-page="contacts-page" class="menu-card col-span-2 group flex flex-col items-center justify-center p-4 bg-gray-100 rounded-lg shadow-sm hover:bg-gray-200 transition-all duration-200">
                         <div class="p-3 bg-white rounded-full mb-3 shadow-md">
                            <i data-lucide="users" class="w-8 h-8 text-gray-500"></i>
                        </div>
                        <span class="font-semibold text-gray-700 text-center">Корисні Контакти</span>
                    </button>
                </div>
            </div>

            <!-- Products Page -->
            <div id="products-page" class="sub-page">
                <h3 class="text-xl font-bold mb-4">Каталог Продукції</h3>
                <div class="mb-4">
                    <div class="border-b border-gray-200">
                        <nav class="-mb-px flex space-x-4 overflow-x-auto no-scrollbar" id="productTabsContainer"></nav>
                    </div>
                </div>
                <div id="productList" class="space-y-3"></div>
            </div>
            
            <!-- Standards Page -->
            <div id="standards-page" class="sub-page">
                <h3 class="text-xl font-bold mb-4">Стандарти Роботи</h3>
                <div class="space-y-2">
                    <!-- Accordion Item 1 -->
                    <div class="border border-gray-200 rounded-lg">
                        <button class="accordion-toggle w-full flex justify-between items-center p-4 text-left font-semibold text-gray-800">
                            <span>1. Гігієна та Санітарія</span>
                            <i data-lucide="chevron-down" class="w-5 h-5 transition-transform duration-300"></i>
                        </button>
                        <div class="accordion-content">
                            <div class="p-4 pt-0 text-gray-600">
                                <ul class="list-disc pl-5 space-y-2">
                                    <li>Обов'язкове миття рук перед початком роботи та після кожної операції.</li>
                                    <li>Робоча поверхня має бути ідеально чистою.</li>
                                    <li>Використання одноразових рукавичок при роботі з готовою продукцією.</li>
                                    <li>Волосся має бути повністю сховане під головний убір.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Accordion Item 2 -->
                    <div class="border border-gray-200 rounded-lg">
                        <button class="accordion-toggle w-full flex justify-between items-center p-4 text-left font-semibold text-gray-800">
                            <span>2. Робота з Клієнтами</span>
                            <i data-lucide="chevron-down" class="w-5 h-5 transition-transform duration-300"></i>
                        </button>
                        <div class="accordion-content">
                             <div class="p-4 pt-0 text-gray-600">
                                <ul class="list-disc pl-5 space-y-2">
                                    <li>Завжди вітатися з клієнтом першим.</li>
                                    <li>Бути ввічливим, усміхненим та готовим допомогти.</li>
                                    <li>Знати асортимент та вміти порадити продукцію.</li>
                                    <li>"Клієнт завжди правий" - базовий принцип роботи.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Accordion Item 3 -->
                    <div class="border border-gray-200 rounded-lg">
                        <button class="accordion-toggle w-full flex justify-between items-center p-4 text-left font-semibold text-gray-800">
                            <span>3. Зберігання Продукції</span>
                             <i data-lucide="chevron-down" class="w-5 h-5 transition-transform duration-300"></i>
                        </button>
                        <div class="accordion-content">
                            <div class="p-4 pt-0 text-gray-600">
                                <ul class="list-disc pl-5 space-y-2">
                                    <li>Суворе дотримання температурних режимів у холодильниках та морозильних камерах.</li>
                                    <li>Правило FIFO (First In, First Out): продукція, що надійшла першою, продається першою.</li>
                                    <li>Регулярна перевірка термінів придатності.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Accordion Item 4 -->
                    <div class="border border-gray-200 rounded-lg">
                        <button class="accordion-toggle w-full flex justify-between items-center p-4 text-left font-semibold text-gray-800">
                            <span>4. Техніка Безпеки</span>
                            <i data-lucide="chevron-down" class="w-5 h-5 transition-transform duration-300"></i>
                        </button>
                        <div class="accordion-content">
                            <div class="p-4 pt-0 text-gray-600">
                                <ul class="list-disc pl-5 space-y-2">
                                    <li>Обережно поводитись з гострими предметами (ножі, слайсери).</li>
                                    <li>Не залишати електроприлади без нагляду.</li>
                                    <li>Знати, де знаходиться вогнегасник та аптечка.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Adaptation Plan Page -->
            <div id="plan-page" class="sub-page">
                <h3 class="text-xl font-bold mb-4">План на перший тиждень</h3>
                <div class="space-y-4">
                    <div>
                        <h4 class="font-semibold mb-2">День 1</h4>
                        <ul class="space-y-2">
                           <li class="flex items-center"><span class="w-5 h-5 bg-amber-500 rounded-full mr-3 flex-shrink-0"></span><span>Познайомитись з наставником</span></li>
                           <li class="flex items-center"><span class="w-5 h-5 bg-amber-500 rounded-full mr-3 flex-shrink-0"></span><span>Вивчити розділ "Стандарти гігієни"</span></li>
                           <li class="flex items-center"><span class="w-5 h-5 bg-gray-200 rounded-full mr-3 flex-shrink-0"></span><span>Вивчити 5 видів пельменів</span></li>
                        </ul>
                    </div>
                     <div>
                        <h4 class="font-semibold mb-2">День 2</h4>
                        <ul class="space-y-2">
                           <li class="flex items-center"><span class="w-5 h-5 bg-gray-200 rounded-full mr-3 flex-shrink-0"></span><span>Практика: ліплення вареників</span></li>
                           <li class="flex items-center"><span class="w-5 h-5 bg-gray-200 rounded-full mr-3 flex-shrink-0"></span><span>Пройти тест "Наша продукція. Частина 1"</span></li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div id="quiz-page" class="sub-page"><h3 class="text-xl font-bold">Тут будуть тести та квізи</h3></div>
            <div id="contacts-page" class="sub-page"><h3 class="text-xl font-bold">Тут будуть корисні контакти</h3></div>

        </main>
    </div>

    <script src="https://unpkg.com/lucide@latest"></script>
    <script>
        lucide.createIcons();
        
        
        document.addEventListener('DOMContentLoaded', () => {
            const mainPage = document.getElementById('main-page');
            const subPages = document.querySelectorAll('.sub-page');
            const menuCards = document.querySelectorAll('.menu-card');
            const backButton = document.getElementById('backButton');
            const headerTitle = document.getElementById('headerTitle');
            const productTabsContainer = document.getElementById('productTabsContainer');
            const productList = document.getElementById('productList');
            const productsPage = document.getElementById('products-page');
            
            const pageTitles = {
                'products-page': 'Наша Продукція',
                'standards-page': 'Стандарти Роботи',
                'plan-page': 'План Адаптації',
                'quiz-page': 'Перевірка Знань',
                'contacts-page': 'Корисні Контакти',
            };

            const notificationContainer = document.createElement('div');
            notificationContainer.id = 'catalogNotification';
            notificationContainer.className = 'hidden mb-4 rounded-md border border-red-200 bg-red-50 p-3 text-sm text-red-700';
            notificationContainer.setAttribute('role', 'alert');
            notificationContainer.setAttribute('aria-live', 'assertive');
            const tabsWrapper = productsPage.querySelector('.mb-4');
            if (tabsWrapper) {
                productsPage.insertBefore(notificationContainer, tabsWrapper);
            } else {
                productsPage.appendChild(notificationContainer);
            }

            const showNotification = (message) => {
                notificationContainer.textContent = message;
                notificationContainer.classList.remove('hidden');
            };

            const hideNotification = () => {
                notificationContainer.textContent = '';
                notificationContainer.classList.add('hidden');
            };

            const setLoadingState = () => {
                productTabsContainer.innerHTML = '';
                productList.innerHTML = `<p class="text-gray-500">Завантаження каталогу...</p>`;
            };

            let productCategories = {};

            const categorizeProducts = (catalog) => {
                const keywords = [
                    { keyword: 'пельмені', category: 'Пельмені' },
                    { keyword: 'вареники', category: 'Вареники' },
                    { keyword: 'сирники', category: 'Сирники' },
                    { keyword: 'піца', category: 'Піца' },
                    { keyword: 'млинці', category: 'Млинці' },
                    { keyword: 'бендерики', category: 'Млинці' },
                    { keyword: 'хінкалі', category: 'Хінкалі' },
                    { keyword: 'чебурек', category: 'Чебуреки' },
                    { keyword: 'котлети', category: 'Котлети' },
                    { keyword: 'фрикадельки', category: 'Котлети' },
                    { keyword: 'тефтелі', category: 'Котлети' },
                    { keyword: 'голубці', category: 'Основні страви' },
                    { keyword: 'зрази', category: 'Основні страви' },
                    { keyword: 'лазанья', category: 'Основні страви' },
                    { keyword: 'паста', category: 'Основні страви' },
                    { keyword: 'суп', category: 'Супи' },
                    { keyword: 'бограч', category: 'Супи' },
                    { keyword: 'солянка', category: 'Супи' },
                    { keyword: 'морозиво', category: 'Десерти' },
                    { keyword: 'сінабони', category: 'Десерти' },
                    { keyword: 'пиріг', category: 'Випічка' },
                    { keyword: 'хачапурі', category: 'Випічка' },
                    { keyword: 'соус', category: 'Соуси та консервація' },
                    { keyword: 'паштет', category: 'Соуси та консервація' },
                    { keyword: 'ікра', category: 'Соуси та консервація' },
                ];

                const grouped = catalog.reduce((acc, product) => {
                    const productNameLower = product.name.toLowerCase();
                    let foundCategory = null;

                    for (const item of keywords) {
                        if (productNameLower.includes(item.keyword)) {
                            foundCategory = item.category;
                            break;
                        }
                    }
                    const category = foundCategory || 'Інше';
                    if (!acc[category]) {
                        acc[category] = [];
                    }
                    acc[category].push(product);
                    return acc;
                }, {});
                return grouped;
            };

            const renderProducts = (category, categoriesData) => {
                productList.innerHTML = '';
                const products = categoriesData[category] || [];
                if (products.length === 0) {
                    productList.innerHTML = `<p class="text-gray-500">Продукція в цій категорії скоро з'явиться.</p>`;
                    return;
                }
                
                const productsHtml = products.map(product => {
                    const onErrorScript = `this.onerror=null;this.src='https://placehold.co/100x100/FDE68A/4B5563?text=Фото';`;
                    return `
                        <div class="flex items-start bg-white p-3 rounded-lg shadow-sm border">
                            <img src="${product.image}" alt="${product.name}" class="w-16 h-16 md:w-20 md:h-20 rounded-md mr-4 object-cover flex-shrink-0" onerror="${onErrorScript}">
                            <div>
                                <h4 class="font-bold text-base md:text-lg">${product.name.replace(' - Галя Балувана', '')}</h4>
                            </div>
                        </div>
                    `;
                }).join('');
                productList.innerHTML = productsHtml;
            };

            const renderCategoryTabs = (categories) => {
                const sortedCategories = Object.keys(categories).sort();
                if (sortedCategories.length === 0) {
                    productTabsContainer.innerHTML = '';
                    return;
                }

                const tabsHtml = sortedCategories.map((category, index) => {
                    const isActive = index === 0;
                    const activeClasses = 'border-amber-500 text-amber-600';
                    const inactiveClasses = 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300';
                    return `<button data-category="${category}" class="product-tab whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm ${isActive ? activeClasses : inactiveClasses}">${category}</button>`;
                }).join('');
                productTabsContainer.innerHTML = tabsHtml;
            };

            const showPage = (pageId) => {
                mainPage.style.display = 'none';
                subPages.forEach(page => page.style.display = 'none');

                const activePage = document.getElementById(pageId);
                if (activePage) {
                    activePage.style.display = 'block';
                    headerTitle.textContent = pageTitles[pageId] || 'Деталі';
                    backButton.classList.remove('invisible');
                }
                
                if (pageId === 'products-page') {
                    if (Object.keys(productCategories).length > 0) {
                        renderCategoryTabs(productCategories);
                        const firstCategory = Object.keys(productCategories).sort()[0] || '';
                        if (firstCategory) {
                            renderProducts(firstCategory, productCategories);
                        }
                    } else if (notificationContainer.classList.contains('hidden') && productList.innerHTML.trim() === '') {
                        setLoadingState();
                    }
                }
            };

            const showMainPage = () => {
                subPages.forEach(page => page.style.display = 'none');
                mainPage.style.display = 'block';
                headerTitle.textContent = 'Навігатор Стажера';
                backButton.classList.add('invisible');
            };

            const loadCatalog = async () => {
                hideNotification();
                setLoadingState();
                try {
                    const response = await fetch('catalog.json');
                    if (!response.ok) {
                        throw new Error(`Failed to load catalog: ${response.status}`);
                    }

                    const catalog = await response.json();
                    if (!Array.isArray(catalog)) {
                        throw new Error('Invalid catalog format');
                    }

                    productCategories = categorizeProducts(catalog);

                    if (Object.keys(productCategories).length === 0) {
                        productTabsContainer.innerHTML = '';
                        productList.innerHTML = `<p class="text-gray-500">Каталог поки порожній.</p>`;
                        return;
                    }

                    renderCategoryTabs(productCategories);
                    const firstCategory = Object.keys(productCategories).sort()[0];
                    if (firstCategory) {
                        renderProducts(firstCategory, productCategories);
                    }
                } catch (error) {
                    console.error('Error loading catalog:', error);
                    productCategories = {};
                    showNotification('Не вдалося завантажити каталог продукції. Перевірте підключення до мережі та спробуйте ще раз.');
                    productTabsContainer.innerHTML = '';
                    productList.innerHTML = `<p class="text-red-600">Не вдалося завантажити каталог.</p>`;
                }
            };

            menuCards.forEach(card => {
                card.addEventListener('click', () => {
                    const pageId = card.dataset.page;
                    showPage(pageId);
                });
            });

            backButton.addEventListener('click', showMainPage);

            loadCatalog();

            productTabsContainer.addEventListener('click', (e) => {
                const targetTab = e.target.closest('.product-tab');
                if (!targetTab) return;

                productTabsContainer.querySelectorAll('.product-tab').forEach(tab => {
                    tab.classList.remove('border-amber-500', 'text-amber-600');
                    tab.classList.add('border-transparent', 'text-gray-500', 'hover:text-gray-700', 'hover:border-gray-300');
                });
                
                targetTab.classList.add('border-amber-500', 'text-amber-600');
                targetTab.classList.remove('border-transparent', 'text-gray-500', 'hover:text-gray-700', 'hover:border-gray-300');
                
                renderProducts(targetTab.dataset.category, productCategories);
            });
            
            // Accordion Logic
            document.addEventListener('click', function(e) {
                const toggle = e.target.closest('.accordion-toggle');
                if (!toggle) return;

                const content = toggle.nextElementSibling;
                const icon = toggle.querySelector('i');

                if (content.style.maxHeight) {
                    content.style.maxHeight = null;
                    icon.classList.remove('rotate-180');
                } else {
                    content.style.maxHeight = content.scrollHeight + "px";
                    icon.classList.add('rotate-180');
                }
            });

        });
    </script>
</body>
</html>

